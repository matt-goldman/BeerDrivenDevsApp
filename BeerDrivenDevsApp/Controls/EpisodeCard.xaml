<?xml version="1.0" encoding="utf-8"?>

<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:BeerDrivenDevsApp.Models"
             xmlns:controls="clr-namespace:BeerDrivenDevsApp.Controls"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="BeerDrivenDevsApp.Controls.EpisodeCard">
    <ContentView.Resources>
        <toolkit:InvertedBoolConverter x:Key="InvertedBool" />
    </ContentView.Resources>
    <Border Style="{StaticResource CardBorder}"
            Margin="0,10"
            Padding="0"
            BackgroundColor="{StaticResource Card}"
            x:DataType="models:Episode">
        <Grid RowDefinitions="6*, 4*"
              VerticalOptions="Fill"
              HorizontalOptions="Fill"
              MaximumHeightRequest="300"
              Margin="0"
              Padding="0">
            <Image Source="{Binding ThumbnailUrl}"
                   HorizontalOptions="Fill"
                   VerticalOptions="Fill"
                   Aspect="AspectFill"
                   Margin="0" />

            <Grid ColumnDefinitions="8*,*"
                  Grid.Row="1"
                  ColumnSpacing="20"
                  VerticalOptions="Fill"
                  HorizontalOptions="Fill"
                  Padding="10,0">
                <FlexLayout Direction="Column"
                            AlignItems="Start"
                            JustifyContent="SpaceEvenly"
                            Margin="10">
                    <VerticalStackLayout>
                           <Label FontAttributes="Bold"
                                  FontFamily="OpenSans-Semibold"
                                  Text="{Binding Title}"
                                  TextColor="{StaticResource Amber900}"
                                  LineBreakMode="TailTruncation"
                                  MaxLines="2"
                                  LineHeight="0.75"
                                  FontSize="Medium"
                                  VerticalOptions="Start"
                                  HorizontalOptions="Start" />

                           <Label Text="{Binding Summary}"
                                  TextColor="{StaticResource Amber700}"
                                  FontSize="Small"
                                  LineBreakMode="TailTruncation"
                                  LineHeight="0.75"
                                  VerticalOptions="Start"
                                  HorizontalOptions="Start"
                                  MaxLines="2" />
                    </VerticalStackLayout>
                    
                    <HorizontalStackLayout VerticalOptions="Fill"
                                           Spacing="5"
                                           Margin="0,5,0,0">
                        <Label Text="{Binding Duration}"
                               TextColor="{StaticResource Amber600}"
                               VerticalTextAlignment="End"
                               VerticalOptions="End"
                               FontSize="12" />

                        <Label Text="â€¢"
                               TextColor="{StaticResource Amber600}"
                               VerticalTextAlignment="End"
                               VerticalOptions="End"
                               FontSize="12" />

                        <Label Text="{Binding ReleasedOn, StringFormat='{}{0:dd MMM yyyy}'}"
                               TextColor="{StaticResource Amber600}"
                               VerticalTextAlignment="End"
                               VerticalOptions="End"
                               FontSize="12" />
                    </HorizontalStackLayout>
                </FlexLayout>

                <FlexLayout Direction="Column"
                            AlignItems="Start"
                            JustifyContent="SpaceEvenly"
                            HorizontalOptions="Center"
                            Grid.Column="1">
                    <Label HorizontalOptions="Center"
                           FontFamily="Lucide"
                           Text="{x:Static controls:Icons.Download}"
                           TextColor="{StaticResource Amber700}" />

                    <Label HorizontalOptions="Center"
                           FontFamily="Lucide"
                           Text="{x:Static controls:Icons.Share2}"
                           TextColor="{StaticResource Amber700}" />

                    <Label HorizontalOptions="Center"
                           FontFamily="Lucide"
                           Text="{x:Static controls:Icons.Trash}"
                           TextColor="{StaticResource Amber700}" />
                </FlexLayout>
            </Grid>
        </Grid>
    </Border>
</ContentView>